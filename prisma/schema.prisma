// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Table Admin
model admin {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  createdAt DateTime @default(now()) @map("createdAt")
  updatedAt DateTime @updatedAt @map("updatedAt")

  @@map("admins")
}

// Table
model Ulasan {
  id     Int    @id @default(autoincrement())
  nama   String
  tempat String
  ulasan String

  @@map("ulasans")
}

// table
model Kecamatan {
  id   Int    @id @default(autoincrement())
  nama String
  slug String @unique

  hotel  Hotel[]
  wisata Wisata[]

  @@map("kecamatans")
}

// table
model Image_wisata {
  id         Int    @id @default(autoincrement())
  idImagekit String @unique
  nama       String
  url        String
  hotelId    Int?
  wisataId   Int?

  hotel  Hotel?  @relation(fields: [hotelId], references: [id])
  wisata Wisata? @relation(fields: [wisataId], references: [id])

  @@map("image_wisata")
}

// table
model Image_hotel {
  id         Int    @id @default(autoincrement())
  idImagekit String @unique
  nama       String
  url        String
  hotelId    Int?

  hotel Hotel? @relation(fields: [hotelId], references: [id])

  @@map("image_hotel")
}

// table
model Image_fasilitas {
  id          Int    @id @default(autoincrement())
  idImagekit  String @unique
  nama        String
  url         String
  fasilitasId Int?

  fasilitas Fasilitas? @relation(fields: [fasilitasId], references: [id])

  @@map("image_fasilitas")
}

// table
model Fasilitas {
  id              Int               @id @default(autoincrement())
  nama            String
  is_active       Boolean           @map("is_active")
  jumlah          Int
  Hotel           Hotel?            @relation(fields: [hotelId], references: [id])
  hotelId         Int?
  Wisata          Wisata?           @relation(fields: [wisataId], references: [id])
  wisataId        Int?
  image_fasilitas Image_fasilitas[]

  @@map("fasilitas")
}

// table
model Hotel {
  id        Int      @id @default(autoincrement())
  title     String
  slug      String   @unique
  deskripsi String
  linkmap   String
  alamat    String
  nohp      BigInt
  harga_min BigInt
  harga_max BigInt
  popular   Boolean
  rating    Float
  check_in  DateTime
  check_out DateTime

  createdAt        DateTime           @default(now()) @map("createdAt")
  updatedAt        DateTime           @updatedAt @map("updatedAt")
  Kecamatan        Kecamatan          @relation(fields: [kecamatanId], references: [id])
  kecamatanId      Int
  image_hotel      Image_hotel[]
  fasilitas        Fasilitas[]
  wisata_has_hotel Wisata_Has_Hotel[]
  Image_wisata     Image_wisata[]

  @@map("hotels")
}

// table
model Wisata {
  id               Int                @id @default(autoincrement())
  title            String
  slug             String             @unique
  deskripsi        String
  linkmap          String
  alamat           String
  nohp             BigInt
  harga_min        BigInt
  harga_max        BigInt
  rating           Float
  jam_buka         DateTime
  jam_tutup        DateTime
  popular          Boolean
  kecamatanId      Int
  createdAt        DateTime           @default(now()) @map("createdAt")
  updatedAt        DateTime           @updatedAt @map("updatedAt")
  Kecamatan        Kecamatan          @relation(fields: [kecamatanId], references: [id])
  image_wisata     Image_wisata[]
  fasilitas        Fasilitas[]
  wisata_has_hotel Wisata_Has_Hotel[]

  @@map("wisatas")
}

model Wisata_Has_Hotel {
  id       Int     @id @default(autoincrement())
  Wisata   Wisata? @relation(fields: [wisataId], references: [id])
  wisataId Int?
  Hotel    Hotel?  @relation(fields: [hotelId], references: [id])
  hotelId  Int?
}
