// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

//Table Admin
model admin {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  createdAt DateTime @default(now()) @map("createdAt")
  updatedAt DateTime @updatedAt @map("updatedAt")

  @@map("admins")
}

//Table   
model Ulasan {
  id     Int    @id @default(autoincrement())
  nama   String
  tempat String
  ulasan String

  @@map("ulasans")
}

//table
model Kecamatan {
  id   Int    @id @default(autoincrement())
  nama String

  hotel  Hotel[]
  wisata Wisata[]

  @@map("kecamatans")
}

//table
model Image {
  id       Int    @id @default(autoincrement())
  nama     String
  hotelId  Int?
  wisataId Int?

  hotel  Hotel?  @relation(fields: [hotelId], references: [id])
  wisata Wisata? @relation(fields: [wisataId], references: [id])

  @@map("images")
}

//table
model Fasilitas {
  id        Int     @id @default(autoincrement())
  nama      String
  is_active Boolean @map("is_active")
  jumlah    Int
  Hotel     Hotel?  @relation(fields: [hotelId], references: [id])
  hotelId   Int?
  Wisata    Wisata? @relation(fields: [wisataId], references: [id])
  wisataId  Int?

  @@map("fasilitas")
}

//table
model Hotel {
  id               Int                @id @default(autoincrement())
  title            String
  deskripsi        String
  linkmap          String
  alamat           String
  nohp             BigInt
  harga_min        BigInt
  harga_max        BigInt
  createdAt        DateTime           @default(now()) @map("createdAt")
  updatedAt        DateTime           @updatedAt @map("updatedAt")
  Kecamatan        Kecamatan          @relation(fields: [kecamatanId], references: [id])
  kecamatanId      Int
  image            Image[]
  wisata_has_hotel wisata_has_hotel[]
  fasilitas        Fasilitas[]

  @@map("hotels")
}

//table
model Wisata {
  id               Int                @id @default(autoincrement())
  title            String
  deskripsi        String
  linkmap          String
  alamat           String
  nohp             BigInt
  harga_min        BigInt
  harga_max        BigInt
  kecamatanId      Int
  createdAt        DateTime           @default(now()) @map("createdAt")
  updatedAt        DateTime           @updatedAt @map("updatedAt")
  Kecamatan        Kecamatan          @relation(fields: [kecamatanId], references: [id])
  image            Image[]
  wisata_has_hotel wisata_has_hotel[]
  fasilitas        Fasilitas[]

  @@map("wisatas")
}

model wisata_has_hotel {
  id       Int  @id @default(autoincrement())
  hotelId  Int?
  wisataId Int?

  hotel  Hotel?  @relation(fields: [hotelId], references: [id])
  wisata Wisata? @relation(fields: [wisataId], references: [id])
}
